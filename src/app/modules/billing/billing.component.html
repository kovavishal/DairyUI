<html>

<head>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
</head>

<body>
    <mat-card>
        <mat-card-header>
            <mat-card-title>Billing Page</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <form [formGroup]="billingForm" (ngSubmit)="onSubmit()">
                <mat-form-field appearance="outline">
                    <mat-label>Customer</mat-label>
                    <mat-select name="customer">
                        @for (customer of customers; track customer) {
                        <mat-option [value]="customer.user_id">{{customer.user_name}}</mat-option>
                        }
                    </mat-select>
                </mat-form-field>
                <!-- <matButton [mat-mini-fab]>
                    <mat-icon aria-hidden="false"
                        style="color: green; font-size: 44px; width: 44px; height: 44px;"
                        fontIcon="add"></mat-icon>
                </matButton> -->
                <button class="mdc-fab mdc-fab--mini" aria-label="add" (click)="addRow()" class="mat-elevation-z1">
                    <div class="mdc-fab__ripple"></div>
                    <span class="mdc-fab__icon material-icons">add</span>
                </button>

                <table mat-table [dataSource]="dataSource">

                    <ng-container matColumnDef="product_name">
                        <th mat-header-cell *matHeaderCellDef> Product </th>
                        <td mat-cell *matCellDef="let element">
                            <mat-form-field appearance="outline">
                                <mat-select name="product">
                                    @for (product of products; track product) {
                                    <mat-option [value]="product.product_name">{{product.product_name}}</mat-option>
                                    }
                                </mat-select>
                            </mat-form-field>
                        </td>

                    </ng-container>
                    <ng-container matColumnDef="quantity">
                        <th mat-header-cell *matHeaderCellDef> Crates </th>

                        <td mat-cell *matCellDef="let element">
                            <mat-form-field appearance="outline">
                                <input matInput name="quantity" (focusout)="focusOutFunction(element.itemid)">
                            </mat-form-field>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="extras">
                        <th mat-header-cell *matHeaderCellDef> Extra Packs </th>

                        <td mat-cell *matCellDef="let element">
                            <mat-form-field appearance="outline">
                                <input matInput name="extras" (focusout)="focusOutFunction(element.itemid)">
                            </mat-form-field>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="rate_per_unit">
                        <th mat-header-cell *matHeaderCellDef> Rate/Unit</th>

                        <td mat-cell *matCellDef="let element">
                            <mat-form-field>
                                <mat-label>Rate/Unit</mat-label>
                                <input matInput name="rateperunit" disabled>
                            </mat-form-field>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="cgst_amount">
                        <th mat-header-cell *matHeaderCellDef> CGST</th>

                        <td mat-cell *matCellDef="let element">
                            <mat-form-field>
                                <mat-label>CGST</mat-label>
                                <input matInput name="cgst" disabled>
                            </mat-form-field>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="sgst_amount">
                        <th mat-header-cell *matHeaderCellDef> SGST </th>

                        <td mat-cell *matCellDef="let element">
                            <mat-form-field>
                                <mat-label>SGST</mat-label>
                                <input matInput name="sgst" disabled>
                            </mat-form-field>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="amount">
                        <th mat-header-cell *matHeaderCellDef> Amount </th>

                        <td mat-cell *matCellDef="let element">
                            <mat-form-field >
                                <mat-label>Amount</mat-label>
                                <input matInput name="amount" disabled>
                            </mat-form-field>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef> Action </th>

                        <td mat-cell *matCellDef="let element">
                            <button mat-button class="mdc-fab mdc-fab--mini" class="mat-elevation-z1"
                                (click)="removeRow(element.itemid)">
                                <div class="mdc-fab__ripple"></div>
                                <span class="mdc-fab__icon material-icons">close</span>
                            </button>
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>

                <button mat-raised-button color="primary" type="submit">Submit</button>
            </form>
        </mat-card-content>
    </mat-card>
</body>

</html>